<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PSU-Odyssey - Administration</title>
    <link rel="icon" type="image/x-icon" href="../favicon.ico">
    <link rel="shortcut icon" href="../favicon.ico">
    <link href="../css/styles.css" rel="stylesheet">
</head>

<body class="mainbody">
    <div id="wrapper">
        <div id="mainhead1">
            <div id="logo">
                <a href="../index.html">
                    <img src="../assets/images/logos/logo.png">
                </a>
            </div>
            <div id="topmenu" class="topmenu" style="margin-top: -3px;">
                <a href="http://pso2.jp/" target="_blank">
                    <img src="../assets/images/partners/pso2.jp.jpg" alt="PSO2_200x40_応援バナー01" width="175" height="35">
                </a>
                <a href="http://phantasystar.sega.jp/" target="_blank">
                    <img src="../assets/images/partners/portal.png">
                </a>
                <a href="http://bumped.org/psublog/category/phantasy-star-online-2/" target="_blank">
                    <img src="../assets/images/partners/psublogmirei.jpg" alt="" width="93" height="35">
                </a>
                <a href="http://www.sega-mag.com" target="_blank">
                    <img src="../assets/images/partners/sega_mag.jpg">
                </a>
                <a href="http://www.facebook.com/psu.odyssey" target="_blank">
                    <img src="../assets/images/partners/facebook.jpg">
                </a>
                <a href="http://www.twitch.tv/gamersdupixelperdutv" target="_blank">
                    <img src="../assets/images/partners/twitch.jpg">
                </a>
            </div>
            <div id="inner_wrapper">
                <div id="bread">
                    <span class="breadcrumbs patway">
                        <a class="patway" href="../index.html">Home</a>
                        <img src="../assets/images/ui/arrow.png" alt="">Administration
                    </span>
                </div>
                <div id="banner"></div>
                <div id="wrapper2">
                    <!--  left menu  -->
                    <div id="leftmenu">
                        <!-- Menu Principal -->
                        <div class="moduletable_menu">
                            <h3>Menu Principal</h3>
                            <ul class="menu">

                                <li class="item1">
                                    <a href="../index.html">Home</a>
                                </li>

                                <li class="item5">
                                    <a href="Presentation.html">Présentation Site Web</a>
                                </li>

                                <li class="item2">
                                    <a href="forum.html">Forum</a>
                                </li>
                            </ul>

                        </div>
                        <!-- Fin Menu Principal -->

                        <!-- Menu Phantasy Star -->
                        <div class="moduletable module-ps">
                            <h3 class="ps-header" data-module-id="ps-1" style="width: 180px;height: 41px;">
                                <span class="sr-only">PS Online</span>
                            </h3>
                            <ul class="menu">

                                <li class="item1">
                                    <a href="#">Phantasy Star Portable</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Phantasy Star Portable 2</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Les Missons PSP</a>
                                </li>
                            </ul>
                        </div>
                        <!-- Fin Menu Phantasy Star -->
                        <!-- Menu Phantasy Star II-->
                        <div class="moduletable module-ps2">
                            <h3 class="ps2-header" data-module-id="ps-2" style="width: 180px;height: 41px;">
                                <span class="sr-only">Phantasy Star II</span>
                            </h3>
                            <ul class="menu">

                                <li class="item1">
                                    <a href="#">Phantasy Star Portable</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Phantasy Star Portable 2</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Les Missons PSP</a>
                                </li>
                            </ul>
                        </div>

                        <div class="moduletable module-ps3">
                            <h3 class="ps3-header" data-module-id="ps-3" style="width: 180px;height: 41px;">
                                <span class="sr-only">Phantasy Star III</span>
                            </h3>
                            <ul class="menu">

                                <li class="item1">
                                    <a href="#">Phantasy Star Portable</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Phantasy Star Portable 2</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Les Missons PSP</a>
                                </li>
                            </ul>
                        </div>

                        <div class="moduletable module-ps4">
                            <h3 class="ps4-header" data-module-id="ps-4" style="width: 180px;height: 41px;">
                                <span class="sr-only">Phantasy Star IV</span>
                            </h3>
                            <ul class="menu">

                                <li class="item1">
                                    <a href="#">Phantasy Star Portable</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Phantasy Star Portable 2</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Les Missons PSP</a>
                                </li>
                            </ul>
                        </div>

                        <div class="moduletable module-psoep12">
                            <h3 class="psoep12-header" data-module-id="psoep12" style="width: 180px;height: 41px;">
                                <span class="sr-only">PSO Episode I & II</span>
                            </h3>
                            <ul class="menu">

                                <li class="item1">
                                    <a href="#">Phantasy Star Portable</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Phantasy Star Portable 2</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Les Missons PSP</a>
                                </li>
                            </ul>
                        </div>

                        <div class="moduletable module-psoep3">
                            <h3 class="psoep3-header" data-module-id="psoep3" style="width: 180px;height: 41px;">
                                <span class="sr-only">PSO Episode III</span>
                            </h3>
                            <ul class="menu">

                                <li class="item1">
                                    <a href="#">Phantasy Star Portable</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Phantasy Star Portable 2</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Les Missons PSP</a>
                                </li>
                            </ul>
                        </div>

                        <div class="moduletable module-psobb">
                            <h3 class="psobb-header" data-module-id="psobb" style="width: 180px;height: 41px;">
                                <span class="sr-only">PSO Blue Burst</span>
                            </h3>
                            <ul class="menu">

                                <li class="item1">
                                    <a href="#">Phantasy Star Portable</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Phantasy Star Portable 2</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Les Missons PSP</a>
                                </li>
                            </ul>
                        </div>

                        <div class="moduletable module-psu">
                            <h3 class="psu-header" data-module-id="ps-universe" style="width: 180px;height: 41px;">
                                <span class="sr-only">PS Universe</span>
                            </h3>
                            <ul class="menu">

                                <li class="item5">
                                    <a href="#">Story : Resumes</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Les Planetes</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Cartes des Villes</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Les Missions Hors-Ligne</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Les MIssions En-Ligne</a>
                                </li>

                            </ul>
                        </div>

                        <div class="moduletable module-psp">
                            <h3 class="psp-header" data-module-id="pso-2" style="width: 180px;height: 41px;">
                                <span class="sr-only">PS Portable</span>
                            </h3>
                            <ul class="menu">

                                <li class="item1">
                                    <a href="#">Phantasy Star Portable</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Phantasy Star Portable 2</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Les Missons PSP</a>
                                </li>
                            </ul>
                        </div>

                        <div class="moduletable module-ps0">
                            <h3 class="ps0-header" data-module-id="ps0" style="width: 180px;height: 41px;">
                                <span class="sr-only">Phantasy Star 0</span>
                            </h3>
                            <ul class="menu">

                                <li class="item1">
                                    <a href="#">Phantasy Star 0</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Guide du jeu</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Story Mode</a>
                                </li>
                            </ul>
                        </div>

                        <div class="moduletable module-psp2">
                            <h3 class="psp2-header" data-module-id="psp2" style="width: 180px;height: 41px;">
                                <span class="sr-only">Phantasy Star Portable 2</span>
                            </h3>
                            <ul class="menu">

                                <li class="item1">
                                    <a href="#">Phantasy Star Portable 2</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Guide du jeu</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Story Mode</a>
                                </li>
                            </ul>
                        </div>

                        <div class="moduletable module-psp2i">
                            <h3 class="psp2i-header" data-module-id="psp2i" style="width: 180px;height: 41px;">
                                <span class="sr-only">Phantasy Star Portable 2 Infinity</span>
                            </h3>
                            <ul class="menu">

                                <li class="item1">
                                    <a href="#">Infinity</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Guide du jeu</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Story Mode</a>
                                </li>
                            </ul>
                        </div>

                        <div class="moduletable module-pso2">
                            <h3 class="pso2-header" data-module-id="pso-2" style="width: 180px;height: 41px;">
                                <span class="sr-only">PSO 2</span>
                            </h3>

                            <ul class="menu">

                                <li class="item1">
                                    <a href="#">Guide Installation</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Infos Team Odyssey</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Story : Resumes</a>
                                </li>

                                <li class="item1">
                                    <a href="#">Personnages</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Planetes</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Carte du Vaisseau</a>
                                </li>

                                <li class="item1">
                                    <a href="#">Theme Songs</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Guide du Jeu</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Archives D'Oracle</a>
                                </li>
                            </ul>
                        </div>

                        <div class="moduletable module-psn">
                            <h3 class="psn-header" data-module-id="psn" style="width: 180px;height: 41px;">
                                <span class="sr-only">Phantasy Star Nova</span>
                            </h3>

                            <ul class="menu">

                                <li class="item1">
                                    <a href="#">Phantasy Star Nova</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Guide de Jeux</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Story Mode</a>
                                </li>

                            </ul>
                        </div>

                        <div class="moduletable module-pso2ng">
                            <h3 class="pso2ng-header" data-module-id="pso2ng" style="width: 180px;height: 41px;">
                                <span class="sr-only">Phantasy Star Online 2 New Genesis</span>
                            </h3>

                            <ul class="menu">

                                <li class="item1">
                                    <a href="#">New Genesis</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Guide du Jeu</a>
                                </li>

                                <li class="item2">
                                    <a href="#">Classes & Skills</a>
                                </li>

                            </ul>
                        </div>

                        <div class="moduletable">
                            <H3>Galerie</H3>
                            <ul class="menu">

                                <li class="item1">
                                    <a href="les_images.html">Les Images</a>
                                </li>

                                <li class="item5">
                                    <a href="les_videos.html">Les Videos</a>
                                </li>

                            </ul>
                        </div>

                        <div class="moduletable">
                            <H3>Webmaster</H3>
                            <ul class="menu">

                                <li class="item1">
                                    <a href="#">Le Webmaster</a>
                                </li>

                                <li class="item5">
                                    <a href="#">Ma collection</a>
                                </li>

                                <li class="item8">
                                    <a href="mailto:devil.ryo@hotmail.ca">Me Contacter</a>
                                </li>
                            </ul>
                        </div>

                        <img src="../assets/images/banners/01_a.jpg" alt="PSO2_200x200_ bannière de support 02"
                            width="160" height="160" style="margin-top: 20px;">
                        <img src="../assets/images/banners/pso2psuo.jpg" alt="PSO2_200x200_ bannière de support 02"
                            width="160" height="160">
                        <img src="../assets/images/banners/01_b.jpg" alt=" soutien PSO2_200x200_ bannière 01 "
                            width="160" height="160">
                        <div id="inner_wrapper2"></div>

                        <!--  end of content aread  -->
                    </div>
                    <!--  end of left menu  -->
                    <div id="inner_wrapper2">
                        <div id="contentL">

                            <div class="componentheading">Bienvenue dans l'administration de PSU-Odyssey</div>
                            <table class="contentpaneopen">
                                <tbody>
                                    <tr>
                                        <td class="contentheading" width="100%">ADMINISTRATION</td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="admin-sections">
                                <div class="signup-panel" style="margin-left: 40px;">
                                    <form id="adminForm" class="signup-form" novalidate>
                                        <h3 class="signup-title">Gestion des Menus</h3>
                                        <div class="form-row">
                                            <label for="leftMenuSelect" class="form-label">Modifier un Titre
                                                :</label>
                                            <select id="leftMenuSelect" class="form-field">

                                            </select>
                                            <button type="button" id="editLeftMenuBtn"
                                                class="btn-primary">Modifier</button>
                                            <button type="button" id="deleteLeftMenuBtn"
                                                class="btn-primary btn-transparent">Supprimer</button>
                                        </div>
                                        <div class="form-row">
                                            <label for="newLeftMenuTitle" class="form-label">Créer un nouveau titre
                                                :</label>
                                            <input type="text" id="newLeftMenuTitle" class="form-field"
                                                placeholder="Nouveau titre">
                                            <button type="button" id="addLeftMenuBtn"
                                                class="btn-primary">Ajouter</button>
                                        </div>

                                    </form>
                                </div>
                                <div class="signup-panel" style="margin-left: 40px;">
                                    <form id="articleForm" class="signup-form" novalidate>
                                        <h3 class="signup-title">Gestion des articles</h3>
                                        <div class="form-row">
                                            <label for="articleTitle" class="form-label">Titre de l'article</label>
                                            <input type="text" id="articleTitle" name="articleTitle" class="form-field"
                                                required>
                                        </div>
                                        <div class="form-row">
                                            <label for="articleContent" class="form-label">Contenu de l'article</label>
                                            <textarea id="articleContent" name="articleContent" class="form-field"
                                                required></textarea>
                                        </div>
                                        <div class="form-row">
                                            <label for="articleImage" class="form-label">Image de l'article</label>
                                            <input type="file" id="articleImage" name="articleImage" accept="image/*"
                                                class="form-field">
                                        </div>
                                        <div class="form-row">
                                            <button type="submit" class="btn-primary">Publier / Modifier</button>
                                        </div>
                                        <div class="form-row">
                                            <ul id="articleList"></ul>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <span class="article_separator"><br></span>
                        </div>
                    </div>
                </div>
                <div id="footer" class="footer">
                    <p style="margin: 10px;">
                        PHANTASY STAR ONLINE 2 (PSO2) &copy; SEGA | Website powered by HTML5 | Édité par DevilRyo
                        &mdash; 2025
                    </p>
                </div>
            </div>
            <script src="../js/admin.js"></script>
            <script>
                // Fonctions AJAX pour leftmenu_api.php
                function sendLeftMenuAction(data, callback) {
                    var xhr = new XMLHttpRequest();
                    xhr.open('POST', '../api/leftmenu_api.php');
                    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                    xhr.onload = function () {
                        if (xhr.status === 200) {
                            callback(JSON.parse(xhr.responseText));
                        }
                    };
                    var params = Object.keys(data).map(function (k) { return encodeURIComponent(k) + '=' + encodeURIComponent(data[k]); }).join('&');
                    xhr.send(params);
                }

                // Remplir dynamiquement le menu déroulant des titres
                function refreshLeftMenuTitles() {
                    sendLeftMenuAction({ action: 'get_titles' }, function (res) {
                        var select = document.getElementById('leftMenuSelect');
                        if (!select) return;
                        select.innerHTML = '';
                        res.titles.forEach(function (t) {
                            var opt = document.createElement('option');
                            opt.value = t;
                            opt.textContent = t;
                            select.appendChild(opt);
                        });
                    });
                }
                refreshLeftMenuTitles();

                // Modifier un titre h3
                document.getElementById('editLeftMenuBtn').onclick = function () {
                    var oldTitle = document.getElementById('leftMenuSelect').value;
                    var newTitle = prompt('Nouveau titre pour "' + oldTitle + '" :');
                    if (newTitle) {
                        sendLeftMenuAction({ action: 'edit_title', title: oldTitle, new_title: newTitle }, function (res) {
                            alert(res.success ? 'Titre modifié !' : 'Erreur');
                            refreshLeftMenuTitles();
                        });
                    }
                };
                // Supprimer un titre h3
                document.getElementById('deleteLeftMenuBtn').onclick = function () {
                    var title = document.getElementById('leftMenuSelect').value;
                    if (confirm('Supprimer le module "' + title + '" ?')) {
                        sendLeftMenuAction({ action: 'delete_title', title: title }, function (res) {
                            alert(res.success ? 'Module supprimé !' : 'Erreur');
                            refreshLeftMenuTitles();
                        });
                    }
                };
                // Ajouter un nouveau titre h3
                document.getElementById('addLeftMenuBtn').onclick = function () {
                    var newTitle = document.getElementById('newLeftMenuTitle').value;
                    if (newTitle) {
                        sendLeftMenuAction({ action: 'add_title', new_title: newTitle }, function (res) {
                            alert(res.success ? 'Module ajouté !' : 'Erreur');
                            refreshLeftMenuTitles();
                        });
                    }
                };
                // Ajouter un élément li dans le menu sélectionné
                document.getElementById('adminForm').onsubmit = function (e) {
                    e.preventDefault();
                    var target = document.getElementById('leftMenuSelect').value;
                    var liTitle = document.getElementById('menuTitle').value;
                    var liLink = document.getElementById('menuLink').value;
                    if (target && liTitle && liLink) {
                        sendLeftMenuAction({ action: 'add_li', target_title: target, li_title: liTitle, li_link: liLink }, function (res) {
                            alert(res.success ? 'Menu ajouté !' : 'Erreur');
                        });
                    }
                };
            </script>
        </div>
    </div>
</body>

</html>